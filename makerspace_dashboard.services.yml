services:
  makerspace_dashboard.google_sheet_client:
    class: Drupal\makerspace_dashboard\Service\GoogleSheetClientService
    arguments:
      - '@config.factory'

  makerspace_dashboard.google_sheet_chart_manager:
    class: Drupal\makerspace_dashboard\Service\GoogleSheetChartManager
    arguments:
      - !tagged_iterator makerspace_dashboard.google_sheet_chart

  makerspace_dashboard.utilization_data:
    class: Drupal\makerspace_dashboard\Service\UtilizationDataService
    arguments:
      - '@database'
      - '@cache.default'
      - '@datetime.time'

  makerspace_dashboard.demographics_data:
    class: Drupal\makerspace_dashboard\Service\DemographicsDataService
    arguments:
      - '@database'
      - '@cache.default'

  makerspace_dashboard.membership_metrics:
    class: Drupal\makerspace_dashboard\Service\MembershipMetricsService
    arguments:
      - '@database'
      - '@cache.default'
      - '@datetime.time'

  makerspace_dashboard.snapshot_data:
    class: Drupal\makerspace_dashboard\Service\SnapshotDataService
    arguments:
      - '@database'
      - '@cache.default'
      - '@datetime.time'

  makerspace_dashboard.engagement_data:
    class: Drupal\makerspace_dashboard\Service\EngagementDataService
    arguments:
      - '@database'
      - '@config.factory'
      - '@datetime.time'

  makerspace_dashboard.events_membership_data:
    class: Drupal\makerspace_dashboard\Service\EventsMembershipDataService
    arguments:
      - '@database'
      - '@cache.default'

  makerspace_dashboard.financial_data:
    class: Drupal\makerspace_dashboard\Service\FinancialDataService
    arguments:
      - '@database'
      - '@cache.default'
      - '@date.formatter'

  makerspace_dashboard.infrastructure_data:
    class: Drupal\makerspace_dashboard\Service\InfrastructureDataService
    arguments:
      - '@database'
      - '@cache.default'

  makerspace_dashboard.kpi_data:
    class: Drupal\makerspace_dashboard\Service\KpiDataService
    arguments:
      - '@config.factory'
      - '@makerspace_dashboard.financial_data'
      - '@makerspace_dashboard.google_sheet_client'
      - '@makerspace_dashboard.events_membership_data'
      - '@makerspace_dashboard.demographics_data'
      - '@makerspace_dashboard.snapshot_data'
      - '@makerspace_dashboard.membership_metrics'
      - '@makerspace_dashboard.utilization_data'

  makerspace_dashboard.section_manager:
    class: Drupal\makerspace_dashboard\Service\DashboardSectionManager
    arguments:
      - !tagged_iterator makerspace_dashboard.section
    public: true

  makerspace_dashboard.section.governance:
    class: Drupal\makerspace_dashboard\DashboardSection\GovernanceSection
    arguments:
      - '@makerspace_dashboard.google_sheet_client'
      - '@string_translation'
    tags:
      - { name: makerspace_dashboard.section }
      - { name: makerspace_dashboard.google_sheet_chart, label: 'Governance', tab_name: 'Governance' }

  makerspace_dashboard.section.finance:
    class: Drupal\makerspace_dashboard\DashboardSection\FinanceSection
    arguments:
      - '@makerspace_dashboard.financial_data'
      - '@makerspace_dashboard.kpi_data'
    tags:
      - { name: makerspace_dashboard.section }
      - { name: makerspace_dashboard.google_sheet_chart, label: 'Financial Snapshot', tab_name: 'Finance' }
    calls:
      - [setStringTranslation, ['@string_translation']]

  makerspace_dashboard.section.infrastructure:
    class: Drupal\makerspace_dashboard\DashboardSection\InfrastructureSection
    arguments:
      - '@makerspace_dashboard.infrastructure_data'
      - '@date.formatter'
    tags:
      - { name: makerspace_dashboard.section }
    calls:
      - [setStringTranslation, ['@string_translation']]

  makerspace_dashboard.section.overview:
    class: Drupal\makerspace_dashboard\DashboardSection\OverviewSection
    arguments:
      - '@makerspace_dashboard.financial_data'
      - '@makerspace_dashboard.snapshot_data'
      - '@makerspace_dashboard.infrastructure_data'
      - '@date.formatter'
      - '@makerspace_dashboard.kpi_data'
    tags:
      - { name: makerspace_dashboard.section }
    calls:
      - [setStringTranslation, ['@string_translation']]

  makerspace_dashboard.section.outreach:
    class: Drupal\makerspace_dashboard\DashboardSection\OutreachSection
    arguments:
      - '@makerspace_dashboard.demographics_data'
    tags:
      - { name: makerspace_dashboard.section }
    calls:
      - [setStringTranslation, ['@string_translation']]

  makerspace_dashboard.section.retention:
    class: Drupal\makerspace_dashboard\DashboardSection\RetentionSection
    arguments:
      - '@makerspace_dashboard.membership_metrics'
      - '@date.formatter'
      - '@datetime.time'
      - '@makerspace_dashboard.utilization_data'
      - '@config.factory'
      - '@makerspace_dashboard.snapshot_data'
      - '@makerspace_dashboard.kpi_data'
    tags:
      - { name: makerspace_dashboard.section }
    calls:
      - [setStringTranslation, ['@string_translation']]

  makerspace_dashboard.section.education:
    class: Drupal\makerspace_dashboard\DashboardSection\EducationSection
    arguments:
      - '@makerspace_dashboard.engagement_data'
      - '@date.formatter'
      - '@datetime.time'
      - '@makerspace_dashboard.events_membership_data'
    tags:
      - { name: makerspace_dashboard.section }
    calls:
      - [setStringTranslation, ['@string_translation']]

  makerspace_dashboard.section.entrepreneurship:
    class: Drupal\makerspace_dashboard\DashboardSection\EntrepreneurshipSection
    tags:
      - { name: makerspace_dashboard.section }
    calls:
      - [setStringTranslation, ['@string_translation']]

  makerspace_dashboard.section.development:
    class: Drupal\makerspace_dashboard\DashboardSection\DevelopmentSection
    tags:
      - { name: makerspace_dashboard.section }
    calls:
      - [setStringTranslation, ['@string_translation']]

  makerspace_dashboard.section.dei:
    class: Drupal\makerspace_dashboard\DashboardSection\DeiSection
    arguments:
      - '@makerspace_dashboard.demographics_data'
      - '@makerspace_dashboard.kpi_data'
    tags:
      - { name: makerspace_dashboard.section }
    calls:
      - [setStringTranslation, ['@string_translation']]
